# 改进剧集分镜工作流

## 变更 ID
`improve-episode-storyboard-workflow`

## 目的
改进剧集编辑工作流，将分镜脚本生成和分镜卡片创建分离为两个独立步骤，允许用户先编辑和确认分镜脚本（大段文本），然后再基于确认的分镜脚本生成分镜卡片列表。

## 为什么
当前实现中，生成分镜脚本后立即创建分镜卡片，用户无法在生成卡片前编辑和确认分镜脚本内容。这限制了用户对分镜脚本的二次编辑能力。同时，分镜卡片的布局和编辑体验也需要改进，以提供更好的用户体验。

## 变更内容
改进剧集编辑工作流，将分镜脚本生成和分镜卡片创建分离为两个独立步骤，允许用户先编辑和确认分镜脚本（大段文本），然后再基于确认的分镜脚本生成分镜卡片列表。同时改进分镜卡片的布局和编辑体验。

## 背景
当前实现中，生成分镜脚本后立即创建分镜卡片，用户无法在生成卡片前编辑和确认分镜脚本内容。这限制了用户对分镜脚本的二次编辑能力。

## 变更范围
- **前端**：`apps/web/episode-edit.html`、`apps/web/js/episode-edit.js`、`apps/web/styles/episode-edit.css`
- **后端**：`server/api/content.py`、`server/api/episodes.py`
- **规范**：`openspec/specs/episode-management/spec.md`

## 主要改进
1. **分镜脚本编辑阶段**：生成分镜脚本后，显示为可编辑的大段文本，用户可以编辑和保存
2. **分镜卡片生成阶段**：用户确认分镜脚本后，才基于分镜脚本生成分镜卡片列表
3. **分镜卡片布局**：每行显示3个卡片，支持向下滚动
4. **分镜卡片字段**：每个卡片包含4个文本字段（分镜描述、图片提示词、视频提示词、音频提示词），其中分镜描述为总，其他3个提示词保持现在的tab切换，默认可浏览，点击编辑可编辑，编辑后可保存。

## 用户价值
- 提供更好的分镜脚本编辑体验
- 允许用户在生成卡片前确认分镜脚本内容
- 改进分镜卡片的布局和编辑体验

## 依赖关系
无外部依赖，基于现有实现改进。

## 风险评估
- 低风险：主要是UI/UX改进，不涉及核心业务逻辑变更
- 需要确保向后兼容：已存在的分镜卡片数据应能正常显示

