## Purpose
改进剧集编辑工作流，将分镜脚本生成和分镜卡片创建分离为两个独立步骤，允许用户先编辑和确认分镜脚本，然后再生成分镜卡片。

## 修改需求

### 需求：剧集编辑工作流
系统必须改进剧集编辑工作流，将分镜脚本生成和分镜卡片创建分离为两个独立步骤。

#### 场景：输入脚本并生成分镜脚本文本
- **当** 用户在剧集编辑页面
- **且** 在输入框中输入脚本文本
- **且** 设置预期剧集时长
- **且** 保存脚本
- **则** 脚本保存到 `data/works/{work_id}/episodes/{episode_id}/script.json`
- **且** 脚本文本和预期时长被存储
- **当** 用户点击"生成分镜脚本"按钮
- **则** 系统使用脚本文本调用 LLM API
- **且** LLM 返回分镜脚本文本（大段文本格式）
- **且** 分镜脚本文本保存到 `data/works/{work_id}/episodes/{episode_id}/storyboard.json` 的 `text` 字段
- **且** `confirmed` 字段设置为 `false`
- **且** 分镜脚本编辑区域显示，允许用户查看和编辑分镜脚本文本

### 场景：编辑和保存分镜脚本文本
- **当** 分镜脚本文本已生成
- **且** 用户在分镜脚本编辑区域编辑文本
- **且** 点击"保存分镜脚本"按钮
- **则** 编辑后的分镜脚本文本保存到 `storyboard.json` 的 `text` 字段
- **且** 用户收到保存成功的提示

### 场景：确认分镜脚本并生成分镜卡片
- **当** 分镜脚本文本已保存
- **且** 用户点击"确认分镜脚本"按钮
- **则** 系统解析分镜脚本文本，生成结构化分镜数据
- **且** 结构化数据保存到 `storyboard.json` 的 `shots` 字段
- **且** `confirmed` 字段设置为 `true`
- **且** 基于结构化数据创建分镜卡片列表
- **且** 分镜脚本编辑区域隐藏，分镜卡片列表区域显示

### 场景：查看分镜卡片列表
- **当** 分镜脚本已确认
- **则** 分镜卡片以网格布局显示
- **且** 每行显示3个分镜卡片
- **且** 支持向下滚动查看更多卡片
- **且** 每个卡片显示分镜编号（分镜 1、分镜 2...）

### 场景：查看分镜卡片字段（浏览模式）
- **当** 分镜卡片已显示
- **则** 每个分镜卡片包含4个文本字段：
  - 分镜描述（总体描述）
  - 图片提示词
  - 视频提示词
  - 音频提示词
- **且** 每个字段默认以浏览模式显示（只读文本）
- **且** 每个字段旁边显示"编辑"按钮

### 场景：编辑分镜卡片字段
- **当** 用户在分镜卡片上点击某个字段的"编辑"按钮
- **则** 该字段切换到编辑模式
- **且** 文本内容显示在可编辑的文本框中（textarea）
- **且** "编辑"按钮变为"保存"和"取消"按钮
- **且** 其他字段保持浏览模式

### 场景：保存分镜卡片字段
- **当** 用户在编辑模式下修改字段内容
- **且** 点击"保存"按钮
- **则** 修改后的内容保存到 `storyboard.json` 中对应分镜的数据
- **且** 字段切换回浏览模式
- **且** 显示更新后的内容
- **且** 用户收到保存成功的提示

### 场景：取消编辑分镜卡片字段
- **当** 用户在编辑模式下
- **且** 点击"取消"按钮
- **则** 字段切换回浏览模式
- **且** 显示原始内容（未保存的修改被丢弃）

### 场景：生成分镜内容（图片/视频/音频）
- **当** 分镜卡片已显示
- **且** 用户在分镜卡片上点击"生成图片"、"生成视频"或"生成音频"按钮
- **则** 系统使用对应字段的提示词调用相应的AI API
- **且** 生成的内容保存到对应的文件夹
- **且** 内容在分镜卡片中显示
- **注意**：此场景保持与现有实现一致，仅更新为使用新的字段编辑功能

