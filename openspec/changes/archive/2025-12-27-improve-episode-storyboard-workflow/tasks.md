# 改进剧集分镜工作流 - 任务清单

## 后端任务

- [x] 修改 `generate_storyboard` API，返回分镜脚本文本（大段文本格式）而不是结构化数据
- [x] 添加 `save_storyboard_text` API，用于保存编辑后的分镜脚本文本
- [x] 添加 `confirm_storyboard` API，基于确认的分镜脚本生成分镜卡片
- [x] 修改 `get_storyboard` API，支持返回分镜脚本文本格式
- [x] 更新 `storyboard.json` 数据结构，支持存储原始文本和结构化数据

## 前端任务

- [x] 修改脚本输入区域，添加"生成分镜脚本"按钮
- [x] 添加分镜脚本编辑区域，显示大段文本，支持编辑和保存
- [x] 添加"确认分镜脚本"按钮，用于生成分镜卡片
- [x] 修改分镜卡片渲染逻辑，支持每行3个卡片的网格布局
- [x] 修改分镜卡片显示，分镜描述单独显示，3个提示词保持tab切换
- [x] 实现分镜卡片字段的浏览/编辑模式切换
- [x] 添加字段编辑后的保存功能
- [x] 更新CSS样式，支持网格布局和滚动

## 规范任务

- [ ] 更新 `episode-management/spec.md`，添加分镜脚本编辑和确认的场景
- [ ] 更新分镜卡片生成和显示的规范

## 测试任务

- [ ] 更新后端API测试，覆盖新的分镜脚本编辑和保存功能
- [ ] 更新前端交互测试，验证分镜脚本编辑和卡片生成流程
- [ ] 验证向后兼容性：已存在的分镜卡片数据能正常显示

