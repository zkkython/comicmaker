# 修复历史记录筛选下拉框

## 变更 ID
`fix-history-filter-dropdown`

## 目的
修复工具页面右侧历史记录筛选下拉框，使其根据当前工具列表动态生成，确保筛选功能能够正确匹配所有工具类型。

## 为什么
- 当前筛选下拉框是硬编码的，包含了一些旧的或不存在的工具名称
- 新增的工具（如 `generate_shot_prompts`、`image_to_style_description`、`sora_image_to_video`、`wan_image_to_video`）没有出现在筛选选项中
- 旧的工具名称（如 `generate_storyboard`、`ref_image_to_video`）仍然存在，但实际工具ID已更改
- 这导致用户无法通过筛选找到某些工具的历史记录

## 变更内容

### 1. 动态生成筛选选项
- 移除 `tools.html` 中硬编码的筛选选项
- 在 `tools.js` 中添加函数，根据 `TOOLS` 数组动态生成筛选下拉框选项
- 确保筛选选项与工具列表保持同步

### 2. 工具名称映射
- 确保筛选下拉框显示的工具名称与 `TOOLS` 数组中的 `name` 字段一致
- 确保筛选选项的 `value` 与 `TOOLS` 数组中的 `id` 字段一致

### 3. 兼容性处理
- 考虑历史记录中可能存在的旧工具类型（如 `generate_storyboard`）
- 如果需要，可以添加工具类型映射，将旧名称映射到新名称

## 背景
- 项目已有 `TOOLS` 数组定义所有工具
- 筛选下拉框当前是硬编码的，没有与 `TOOLS` 数组同步
- 工具类型已更新，但筛选选项未更新

## 变更范围
- **前端代码**：
  - 修改 `apps/web/tools.html`（移除硬编码的筛选选项）
  - 修改 `apps/web/js/tools.js`（添加动态生成筛选选项的函数）

## 技术细节
- 在页面加载时，根据 `TOOLS` 数组动态生成筛选下拉框的 `<option>` 元素
- 每个选项的 `value` 使用工具的 `id`，显示文本使用工具的 `name`
- 保持"全部工具"选项作为第一个选项（value 为空字符串）

