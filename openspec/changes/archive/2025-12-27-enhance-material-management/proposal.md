# 素材库功能完善

## 变更 ID
`enhance-material-management`

## 目的
完善素材库功能，扩展素材类型，提升素材复用效率，优化用户体验。

## 为什么
当前素材管理系统只支持三种类型（人物、场景、道具），无法满足用户对多样化素材的需求。同时，图生图工具只能通过上传或粘贴图片来添加参考图，无法直接使用素材库中的素材，降低了素材复用效率。历史记录的"做同款"功能也不支持图片填充，用户需要重复上传图片，影响工作效率。

## 变更概述

本次变更旨在完善素材库功能，主要包括：
1. 增加"其他"素材类别
2. 为图生图工具增加素材选择功能
3. 优化素材选择体验（筛选、详情查看、选择）
4. 调整创建新素材面板宽度
5. 优化历史记录"做同款"功能，支持图片填充

## 背景

当前素材管理系统只支持三种类型（人物、场景、道具），无法满足用户对多样化素材的需求。同时，图生图工具只能通过上传或粘贴图片来添加参考图，无法直接使用素材库中的素材，降低了素材复用效率。

## 目标

1. **扩展素材类型**：增加"其他"类别，支持更多类型的素材管理
2. **提升素材复用**：在图生图工具中集成素材选择功能，方便用户快速选择素材库中的图片
3. **优化用户体验**：提供更好的素材浏览、筛选和选择体验
4. **完善工作流**：历史记录"做同款"功能支持图片填充，减少重复操作

## 影响范围

- **后端**：
  - `server/api/materials.py`：增加"其他"类型支持
  - 素材列表接口需要支持按类型筛选
- **前端**：
  - `apps/web/materials.html`：增加"其他"标签页，调整创建面板宽度
  - `apps/web/js/materials.js`：支持"其他"类型
  - `apps/web/tools.html`：增加素材选择面板
  - `apps/web/js/tools.js`：集成素材选择功能，优化"做同款"功能
  - `apps/web/styles/tools.css`：素材选择面板样式
  - `apps/web/styles/materials.css`：创建面板宽度调整

## 依赖关系

- 依赖现有的素材管理功能
- 依赖图生图工具的多图片上传功能
- 依赖历史记录功能

## 风险

- 素材选择面板可能影响页面性能（如果素材数量很大）
- 需要确保素材选择后正确填充到图片上传组件

